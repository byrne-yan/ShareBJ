<ion-view view-title="Email注册" >

    <!--<ion-nav-back-button></ion-nav-back-button>-->
    <ion-content class="has-header" >
        <form name="signupForm" >
            <div class="list list-inset">
                <label class="item item-input">
                    <input type="text" id="name" placeholder="昵称" ng-model="user.name">
                </label>

                <div class="item item-input-inset item-button-right">
                    <label class="item-input-wraper">
                        <input type="email" name="email" placeholder="abc@example.com" ng-model="user.email" required >
                    </label>
                    <button class="button button-small" id="code_button" ng-click="getCode()"
                            ng-disabled="!codeRequestReady">{{codeButtonName}}</button>
                </div>
                <div class="item item-text-wrap" ng-if="codeSent">
                    <p>注册验证码已发送给{{user.email}}, 请检查你的电子邮箱。</p>
                    <p>电子邮件送达可能需要一点时间，如果没找到验证码邮件，请稍后再检查邮箱。</p>
                    <p>另外，验证码邮件也有可能被放置到垃圾邮件里，在尝试重新请求发送验证码前，请先仔细找一找。</p>
                </div>
                <label class="item item-input" >
                    <input type="text" id="code" placeholder="验证码" ng-model="user.code" ng-disabled="!codeSent">
                </label>

                <ng-messages class="error-container" for="signupForm.email.$error"
                             ng-if="signupForm.email.$touched">
                    <div ng-message="required" class="error" >
                        <i class="ion-information-circled"></i>
                        请提供email地址！
                    </div>
                    <div ng-message="pattern" class="error">
                        <i class="ion-information-circled"></i>
                        无效email地址，请重新输入正确的email地址！
                    </div>
                </ng-messages>
            </div>
            <div class="padding">

            </div>
            <div class="padding">
                <button id="signupButton" type="submit" ng-click="signup()"
                        ng-disabled="!signupReady"
                        class="button button-full button-balanced ink">发送</button>
            </div>
            <ng-messages id="errorMessages" for="user.signupError">
                <div ng-message="signup" class="error">
                    <i class="ion-information-circled"></i>
                    {{user.signupErrorMessage}}
                </div>
            </ng-messages>
        </form>
        <a class="button button-clear" id="enroll" ui_sref="signupByPhone" >使用手机号注册</a>
        <a class="button button-clear" ui_sref="login" >登录</a>
    </ion-content>
</ion-view>
