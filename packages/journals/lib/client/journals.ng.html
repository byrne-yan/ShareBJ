<ion-view view-title="宝宝日记" >
    <ion-nav-title></ion-nav-title>
    <!--<ion-header-bar >-->
        <!--<ion-nav-title><span ng-if = "currentUser">{{currentUser.username}}-</span>Journals</ion-nav-title>-->
    <!--</ion-header-bar>-->
    <!--<ion-nav-buttons side="primary">-->
        <!--<button menu-toggle="left" class="button button-icon icon ion-navicon ">-->
        <!--</button>-->
    <!--</ion-nav-buttons>-->
    <ion-nav-buttons side="primary">
        <img class="SBJ-AVATAR" ng-src="{{$root.currentUser.profile.avatar}}" ng-if="$root.currentUser.profile.avatar">
        <ng-letter-avatar class="SBJ-AVATAR" data="{{$root.currentUser.profile.name || $root.currentUser.username}}"
                          charCount="1" height="32" width="32" shape="round"
                          ng-if="!$root.currentUser.profile.avatar"></ng-letter-avatar>
        <button class="button button-clear" ui_sref="shareBJ.journals.new">
            <i class="icon ion-ios-camera-outline"></i>
        </button>
        <div class="item-input-inset">
            <label class="item-input-wrapper">
                <i class="icon ion-ios-search placeholder-icon"></i>
                <input type="search"  class="journal-search" placeholder="检索" ng-model="filter.search">
            </label>
            <!--<button class="button button-clear button-small" ng-click="cancelSearch()">取消</button>-->
        </div>
        <select class="button button-clear button-balanced button-small baby" ng-model="filter.baby">
            <option value="" selected>全部</option>
            <option ng-repeat="baby in babies" value="{{baby._id}}">{{baby.nickname || baby.name}}</option>
        </select>
    </ion-nav-buttons>

    <ion-content class="has-header">
        <div class="list ">
            <div ng-repeat="journal in journals track by journal._id" class="journal">

                <div class="item item-avatar item-text-wrap" >
                    <img ng-src="{{journal.authorDetail.profile.avatar}}" ng-if="journal.authorDetail.profile.avatar">
                    <ng-letter-avatar class="item-image"
                                      data="{{journal.babyDetail.nickname || journal.babyDetail.name}}"
                                      charCount="1" shape="round"
                                      ng-if="!journal.authorDetail.profile.avatar"></ng-letter-avatar>

                    <p>@{{journal.babyDetail.nickname}}</p>
                    <!--<img class="SBJ-AVATAR" ng-src="{{journal.babyDetail.avatar}}">-->
                    <!--<h2>{{journal.authorDetail.profile.name || journal.authorDetail.username}}</h2>-->
                    <p >{{journal.description}}</p>
                    <!--<a class="item-note" href="#" ui-sref="shareBJ.babies.edit({babyId:journal.baby})">-->
                        <!--{{journal.babyDetail.nickname || journal.babyDetail.nickname}}-->
                    <!--</a>-->
                </div>
                <div class="item item-body ">
                    <!--{{journal.images}}-->
                    <img class="journal-img" ng-if="journal.images.length > 0" ng-repeat="image in journal.images" ng-src="{{image.url}}" >
                    <p class="journal-date">{{journal.authorDetail.profile.name || journal.authorDetail.username}}@{{timeFromNow(journal.createdAt)}}</p>
                    <div class="item tabs tabs-icon-left " >
                        <a class="tab-item" href="#">
                            <i class="icon ion-heart"></i>
                            赞
                        </a>
                        <a class="tab-item" href="#">
                            <i class="icon ion-chatbox"></i>
                            评论
                        </a>
                        <a class="tab-item" href="#">
                            <i class="icon ion-share"></i>
                            分享
                        </a>
                    </div>

                    <!--<div class="item-options">-->
                        <!--<button class="button">赞</button>-->
                    <!--</div>-->
                </div>

            </div>
        </div>

        <ion-infinite-scroll on-infinite="loadOlderJournals()" ng-if="numLoads < journalsCount">

        </ion-infinite-scroll>
    </ion-content>
</ion-view>
